{"ast":null,"code":"import _slicedToArray from\"D:/My Project/weather-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{WeatherCity}from'../components/WeatherCity/WeatherCity';import{MyLocationWeather}from'../components/MyLocationWeather/MyLocationWeather';import{useEffect,useState}from'react';import{apiServiceWeatherData,apiServiceForecastData// apiServiceSearchData,\n}from'../Api/apiService';import{Loader}from'../components/Loader/Loader';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _JSON$parse,_JSON$parse2;var _useState=useState((_JSON$parse=JSON.parse(localStorage.getItem('weather')))!==null&&_JSON$parse!==void 0?_JSON$parse:{}),_useState2=_slicedToArray(_useState,2),weather=_useState2[0],setWeather=_useState2[1];var _useState3=useState((_JSON$parse2=JSON.parse(localStorage.getItem('weather')))!==null&&_JSON$parse2!==void 0?_JSON$parse2:{}),_useState4=_slicedToArray(_useState3,2),forecast=_useState4[0],setForecast=_useState4[1];var _useState5=useState({latitude:null,longitude:null}),_useState6=_slicedToArray(_useState5,2),location=_useState6[0],setLocation=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];// console.log(location);\n// console.log(weather);\n// console.log(forecast);\nvar latitude=location.latitude,longitude=location.longitude;var handleSuccess=function handleSuccess(position){var _position$coords=position.coords,latitude=_position$coords.latitude,longitude=_position$coords.longitude;setLocation({latitude:latitude,longitude:longitude});};var handleError=function handleError(error){console.log(error);};useEffect(function(){localStorage.setItem('weather',JSON.stringify(weather));setIsLoading(true);if('geolocation'in navigator){navigator.geolocation.getCurrentPosition(handleSuccess,handleError);}else{alert('Geolocation is not supported by your browser');}if(latitude!==null&&longitude!==null){apiServiceWeatherData(latitude,longitude).then(function(weather){return setWeather(weather);}).catch(function(error){return console.error(error);}).finally(function(){return setIsLoading(false);});apiServiceForecastData(latitude,longitude).then(function(forecast){return setForecast(forecast);}).catch(function(error){return console.error(error);}).finally(function(){return setIsLoading(false);});}},[latitude,longitude]);return/*#__PURE__*/_jsxs(_Fragment,{children:[Object.keys(weather).length&&/*#__PURE__*/_jsx(WeatherCity,{weather:weather}),Object.keys(weather).length&&/*#__PURE__*/_jsx(MyLocationWeather,{weather:weather,forecast:forecast}),isLoading&&/*#__PURE__*/_jsx(Loader,{})]});};export default Home;","map":{"version":3,"names":["WeatherCity","MyLocationWeather","useEffect","useState","apiServiceWeatherData","apiServiceForecastData","Loader","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Home","_JSON$parse","_JSON$parse2","_useState","JSON","parse","localStorage","getItem","_useState2","_slicedToArray","weather","setWeather","_useState3","_useState4","forecast","setForecast","_useState5","latitude","longitude","_useState6","location","setLocation","_useState7","_useState8","isLoading","setIsLoading","handleSuccess","position","_position$coords","coords","handleError","error","console","log","setItem","stringify","navigator","geolocation","getCurrentPosition","alert","then","catch","finally","children","Object","keys","length"],"sources":["D:/My Project/weather-app/src/pages/Home.jsx"],"sourcesContent":["import { WeatherCity } from '../components/WeatherCity/WeatherCity';\r\nimport { MyLocationWeather } from '../components/MyLocationWeather/MyLocationWeather';\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n  apiServiceWeatherData,\r\n  apiServiceForecastData,\r\n  // apiServiceSearchData,\r\n} from '../Api/apiService';\r\nimport { Loader } from '../components/Loader/Loader';\r\n\r\nconst Home = () => {\r\n  const [weather, setWeather] = useState(\r\n    JSON.parse(localStorage.getItem('weather')) ?? {}\r\n  );\r\n  const [forecast, setForecast] = useState(\r\n    JSON.parse(localStorage.getItem('weather')) ?? {}\r\n  );\r\n  const [location, setLocation] = useState({\r\n    latitude: null,\r\n    longitude: null,\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // console.log(location);\r\n  // console.log(weather);\r\n  // console.log(forecast);\r\n  const { latitude, longitude } = location;\r\n\r\n  const handleSuccess = position => {\r\n    const { latitude, longitude } = position.coords;\r\n    setLocation({ latitude, longitude });\r\n  };\r\n\r\n  const handleError = error => {\r\n    console.log(error);\r\n  };\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('weather', JSON.stringify(weather));\r\n    setIsLoading(true);\r\n\r\n    if ('geolocation' in navigator) {\r\n      navigator.geolocation.getCurrentPosition(handleSuccess, handleError);\r\n    } else {\r\n      alert('Geolocation is not supported by your browser');\r\n    }\r\n\r\n    if (latitude !== null && longitude !== null) {\r\n      apiServiceWeatherData(latitude, longitude)\r\n        .then(weather => setWeather(weather))\r\n        .catch(error => console.error(error))\r\n        .finally(() => setIsLoading(false));\r\n\r\n      apiServiceForecastData(latitude, longitude)\r\n        .then(forecast => setForecast(forecast))\r\n        .catch(error => console.error(error))\r\n        .finally(() => setIsLoading(false));\r\n    }\r\n  }, [latitude, longitude]);\r\n\r\n  return (\r\n    <>\r\n      {Object.keys(weather).length && <WeatherCity weather={weather} />}\r\n      {Object.keys(weather).length && (\r\n        <MyLocationWeather weather={weather} forecast={forecast} />\r\n      )}\r\n\r\n      {/* <WeatherCity weather={weather} /> */}\r\n      {/* <MyLocationWeather weather={weather} forecast={forecast} /> */}\r\n      {isLoading && <Loader />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}